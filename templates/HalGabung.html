<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-rbsA2VBKQhggwzxH7pPCaAqO46MgnOM80zW1RWuH61DGLwZJEdK2Kadq2F9CUG65"
      crossorigin="anonymous"
    />
    <title>Gabungkan Motif</title>
    <style>
      /* General Body Styling */
      body {
        background-color: #f0f4f8; /* Light background */
        color: #333; /* Dark text color for readability */
        font-family: "Arial", sans-serif;
      }

      /* Container Settings */
      .container {
        max-width: 1200px;
        margin-top: 40px;
      }

      /* Card Styling */
      .card {
        border: 1px solid #ddd; /* Light grey border */
        border-radius: 10px;
      }

      /* Header and Title Styling */
      h3 {
        color: #002ba3; /* Dark blue for headings */
        font-weight: bold;
      }

      /* Styling for Buttons */
      .btn-primary {
        background-color: #0066cc; /* Blue background for primary buttons */
        border-color: #005bb5; /* Darker blue border */
      }

      .btn-primary:hover {
        background-color: #005bb5; /* Darker blue on hover */
      }

      .btn-secondary {
        background-color: #6c757d; /* Grey background for secondary buttons */
        border-color: #5a6268; /* Darker grey border */
      }

      .btn-secondary:hover {
        background-color: #5a6268; /* Darker grey on hover */
      }

      /* Button Container */
      .buttons-container {
        display: flex;
        flex-direction: column;
        justify-content: center;
        align-items: center;
        margin-top: 30px;
      }

      .btn-custom {
        margin-bottom: 15px;
        width: 150px;
      }

      /* Styling for Images */
      .img-fluid {
        border-radius: 10px;
      }

      /* Styling for the Preview Image */
      #previewImage {
        max-width: 100%;
        border-radius: 10px;
        margin-top: 20px;
      }

      /* Text Center */
      .text-center {
        text-align: center;
      }
    </style>
  </head>
  <body>
    <!-- Container untuk seluruh halaman -->
    <div class="container mt-5">
      <div class="row">
        <!-- Kolom Kiri: Menampilkan gambar hasil generate motif secara vertikal -->
        <div class="col-md-6">
          <h3>Motif Hasil Generate</h3>
          <div id="motifKiri" class="row">
            <!-- Gambar motif hasil generate secara vertikal -->
            <div class="col-md-12 mb-3">
              <img
                src="image1.jpg"
                alt="Motif 1"
                class="img-fluid"
                onclick="showPreview('image1.jpg')"
              />
            </div>
            <div class="col-md-12 mb-3">
              <img
                src="image2.jpg"
                alt="Motif 2"
                class="img-fluid"
                onclick="showPreview('image2.jpg')"
              />
            </div>
            <div class="col-md-12 mb-3">
              <img
                src="image3.jpg"
                alt="Motif 3"
                class="img-fluid"
                onclick="showPreview('image3.jpg')"
              />
            </div>
            <div class="col-md-12 mb-3">
              <img
                src="image4.jpg"
                alt="Motif 4"
                class="img-fluid"
                onclick="showPreview('image4.jpg')"
              />
            </div>
          </div>
        </div>

        <!-- Kolom Kanan: Menampilkan hasil preview motif yang dipilih -->
        <div class="col-md-6">
          <h3>Preview Gabungan Motif</h3>
          <div id="motifPreview" class="text-center">
            <!-- Gambar preview hasil gabungan motif yang dipilih -->
            <img
              src=""
              id="previewImage"
              class="img-fluid"
              style="display: none"
            />
          </div>
        </div>
      </div>

      <!-- Baris Tombol di Bawah Kolom -->
      <div class="buttons-container">
        <button
          type="button"
          class="btn btn-primary btn-custom"
          id="saveButton"
        >
          Simpan Motif
        </button>
        <button
          type="button"
          class="btn btn-primary btn-custom"
          id="changeColorButton"
        >
          Ubah Warna
        </button>
        <a href="#" class="btn btn-secondary btn-custom" id="backButton"
          >Kembali</a
        >
      </div>
    </div>

    <!-- Canvas untuk menggambar gabungan motif -->
    <canvas id="canvas" width="500" height="500" style="display: none"></canvas>

    <script>
      let selectedImages = [];

      // Fungsi untuk menampilkan gambar yang dipilih di kolom kanan
      function showPreview(imagePath) {
        if (selectedImages.length < 2) {
          selectedImages.push(imagePath);
          document.getElementById("previewImage").src = selectedImages[0];
          document.getElementById("previewImage").style.display = "block";
        } else {
          alert("Anda sudah memilih dua motif!");
        }
      }

      // Fungsi untuk menggabungkan dua gambar motif
      function combineMotifs(image1, image2) {
        const canvas = document.getElementById("canvas");
        const ctx = canvas.getContext("2d");

        const img1 = new Image();
        img1.src = image1;
        img1.onload = function () {
          ctx.drawImage(img1, 0, 0); // Menambahkan gambar pertama

          const img2 = new Image();
          img2.src = image2;
          img2.onload = function () {
            ctx.drawImage(img2, img1.width, 0); // Menambahkan gambar kedua
            const combinedMotif = canvas.toDataURL("image/png");
            displayCombinedMotif(combinedMotif);
          };
        };
      }

      // Menampilkan hasil gabungan motif di kolom kanan
      function displayCombinedMotif(imageData) {
        const previewImage = document.getElementById("previewImage");
        previewImage.src = imageData;
        previewImage.style.display = "block";
      }

      // Event listener untuk tombol Gabungkan Motif
      document
        .getElementById("combineButton")
        .addEventListener("click", function (event) {
          event.preventDefault(); // Mencegah form atau reload halaman

          if (selectedImages.length === 2) {
            combineMotifs(selectedImages[0], selectedImages[1]);
          } else {
            alert("Silakan pilih dua motif terlebih dahulu!");
          }
        });
    </script>

    <script
      src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.bundle.min.js"
      integrity="sha384-kenU1KFdBIe4zVF0s0G1M5b4hcpxyD9F7jL+jjXkk+Q2h455rYXK/7HAuoJl+0I4"
      crossorigin="anonymous"
    ></script>
  </body>
</html>
